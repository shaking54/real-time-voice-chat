{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const VoiceInput=_ref=>{let{onAudioSend}=_ref;const[recording,setRecording]=useState(false);let mediaRecorder;let audioChunks=[];const startRecording=async()=>{const stream=await navigator.mediaDevices.getUserMedia({audio:true});mediaRecorder=new MediaRecorder(stream);mediaRecorder.start();setRecording(true);mediaRecorder.ondataavailable=event=>{audioChunks.push(event.data);};mediaRecorder.onstop=async()=>{const audioBlob=new Blob(audioChunks,{type:\"audio/wav\"});sendAudioToBackend(audioBlob);setRecording(false);};};const stopRecording=()=>{mediaRecorder.stop();};const sendAudioToBackend=async audioBlob=>{const formData=new FormData();formData.append(\"audio\",audioBlob);const response=await fetch(\"http://localhost:8000/api/audio-input\",{method:\"POST\",body:formData});if(response.ok){const audioRes=await response.blob();onAudioSend(audioRes);}};return/*#__PURE__*/_jsx(\"div\",{children:!recording?/*#__PURE__*/_jsx(\"button\",{onClick:startRecording,children:\"\\uD83C\\uDF99\\uFE0F Start Talking\"}):/*#__PURE__*/_jsx(\"button\",{onClick:stopRecording,children:\"\\u23F9\\uFE0F Stop\"})});};export default VoiceInput;","map":{"version":3,"names":["React","useState","jsx","_jsx","VoiceInput","_ref","onAudioSend","recording","setRecording","mediaRecorder","audioChunks","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","MediaRecorder","start","ondataavailable","event","push","data","onstop","audioBlob","Blob","type","sendAudioToBackend","stopRecording","stop","formData","FormData","append","response","fetch","method","body","ok","audioRes","blob","children","onClick"],"sources":["/home/shaking/qlay/real-time-voice-chat/frontend/src/components/VoiceInput.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nconst VoiceInput = ({ onAudioSend }) => {\n  const [recording, setRecording] = useState(false);\n  let mediaRecorder;\n  let audioChunks = [];\n\n  const startRecording = async () => {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n    mediaRecorder = new MediaRecorder(stream);\n    mediaRecorder.start();\n    setRecording(true);\n\n    mediaRecorder.ondataavailable = (event) => {\n      audioChunks.push(event.data);\n    };\n\n    mediaRecorder.onstop = async () => {\n      const audioBlob = new Blob(audioChunks, { type: \"audio/wav\" });\n      sendAudioToBackend(audioBlob);\n      setRecording(false);\n    };\n  };\n\n  const stopRecording = () => {\n    mediaRecorder.stop();\n  };\n\n  const sendAudioToBackend = async (audioBlob) => {\n    const formData = new FormData();\n    formData.append(\"audio\", audioBlob);\n\n    const response = await fetch(\"http://localhost:8000/api/audio-input\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (response.ok) {\n      const audioRes = await response.blob();\n      onAudioSend(audioRes);\n    }\n  };\n\n  return (\n    <div>\n      {!recording ? (\n        <button onClick={startRecording}>üéôÔ∏è Start Talking</button>\n      ) : (\n        <button onClick={stopRecording}>‚èπÔ∏è Stop</button>\n      )}\n    </div>\n  );\n};\n\nexport default VoiceInput;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAqB,IAApB,CAAEC,WAAY,CAAC,CAAAD,IAAA,CACjC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGP,QAAQ,CAAC,KAAK,CAAC,CACjD,GAAI,CAAAQ,aAAa,CACjB,GAAI,CAAAC,WAAW,CAAG,EAAE,CAEpB,KAAM,CAAAC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CACzEP,aAAa,CAAG,GAAI,CAAAQ,aAAa,CAACL,MAAM,CAAC,CACzCH,aAAa,CAACS,KAAK,CAAC,CAAC,CACrBV,YAAY,CAAC,IAAI,CAAC,CAElBC,aAAa,CAACU,eAAe,CAAIC,KAAK,EAAK,CACzCV,WAAW,CAACW,IAAI,CAACD,KAAK,CAACE,IAAI,CAAC,CAC9B,CAAC,CAEDb,aAAa,CAACc,MAAM,CAAG,SAAY,CACjC,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAC,IAAI,CAACf,WAAW,CAAE,CAAEgB,IAAI,CAAE,WAAY,CAAC,CAAC,CAC9DC,kBAAkB,CAACH,SAAS,CAAC,CAC7BhB,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CACH,CAAC,CAED,KAAM,CAAAoB,aAAa,CAAGA,CAAA,GAAM,CAC1BnB,aAAa,CAACoB,IAAI,CAAC,CAAC,CACtB,CAAC,CAED,KAAM,CAAAF,kBAAkB,CAAG,KAAO,CAAAH,SAAS,EAAK,CAC9C,KAAM,CAAAM,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAER,SAAS,CAAC,CAEnC,KAAM,CAAAS,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,uCAAuC,CAAE,CACpEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEN,QACR,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CACtCjC,WAAW,CAACgC,QAAQ,CAAC,CACvB,CACF,CAAC,CAED,mBACEnC,IAAA,QAAAqC,QAAA,CACG,CAACjC,SAAS,cACTJ,IAAA,WAAQsC,OAAO,CAAE9B,cAAe,CAAA6B,QAAA,CAAC,kCAAiB,CAAQ,CAAC,cAE3DrC,IAAA,WAAQsC,OAAO,CAAEb,aAAc,CAAAY,QAAA,CAAC,mBAAO,CAAQ,CAChD,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAApC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}