{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[message,setMessage]=useState(\"\");const[audioUrl,setAudioUrl]=useState(null);const[chats,setChats]=useState([]);// Store chat messages\nconst sendMessage=async()=>{if(!message.trim())return;// Prevent sending empty messages\n// Add user message to chat\nconst newChats=[...chats,{sender:\"You\",text:message}];setChats(newChats);setMessage(\"\");// Clear input after sending\n// Send message to backend\nconst res=await fetch(\"http://localhost:8000/api/message\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message})});// Receive audio response\nconst data=await res.json();const audioRes=await fetch(`http://localhost:8000${data.audio_url}`);const blob=await audioRes.blob();const url=URL.createObjectURL(blob);setAudioUrl(url);setChats([...newChats,{sender:\"Bot\",text:\"Audio Response\",audio:url}]);};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"400px\",margin:\"auto\",padding:\"20px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chat with Voice Response\"}),/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid #ccc\",padding:\"10px\",height:\"300px\",overflowY:\"auto\"},children:chats.map((chat,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:chat.sender===\"You\"?\"right\":\"left\",margin:\"5px 0\"},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[chat.sender,\": \"]}),chat.text,chat.audio&&/*#__PURE__*/_jsx(\"audio\",{controls:true,src:chat.audio,style:{display:\"block\",marginTop:\"5px\"}})]},index))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),style:{width:\"80%\",padding:\"5px\",marginTop:\"10px\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,style:{padding:\"5px 10px\",marginLeft:\"10px\"},children:\"Send\"})]});}export default App;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","App","message","setMessage","audioUrl","setAudioUrl","chats","setChats","sendMessage","trim","newChats","sender","text","res","fetch","method","headers","body","JSON","stringify","data","json","audioRes","audio_url","blob","url","URL","createObjectURL","audio","style","maxWidth","margin","padding","textAlign","children","border","height","overflowY","map","chat","index","controls","src","display","marginTop","type","value","onChange","e","target","width","onClick","marginLeft"],"sources":["/home/shaking/qlay/real-time-voice-chat/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nfunction App() {\n  const [message, setMessage] = useState(\"\");\n  const [audioUrl, setAudioUrl] = useState(null);\n  const [chats, setChats] = useState([]); // Store chat messages\n\n  const sendMessage = async () => {\n    if (!message.trim()) return; // Prevent sending empty messages\n\n    // Add user message to chat\n    const newChats = [...chats, { sender: \"You\", text: message }];\n    setChats(newChats);\n    setMessage(\"\"); // Clear input after sending\n\n    // Send message to backend\n    const res = await fetch(\"http://localhost:8000/api/message\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ message }),\n    });\n\n    // Receive audio response\n    const data = await res.json();\n    const audioRes = await fetch(`http://localhost:8000${data.audio_url}`);\n    const blob = await audioRes.blob();\n    const url = URL.createObjectURL(blob);\n\n    setAudioUrl(url);\n    setChats([...newChats, { sender: \"Bot\", text: \"Audio Response\", audio: url }]);\n  };\n\n  return (\n    <div style={{ maxWidth: \"400px\", margin: \"auto\", padding: \"20px\", textAlign: \"center\" }}>\n      <h1>Chat with Voice Response</h1>\n      <div style={{ border: \"1px solid #ccc\", padding: \"10px\", height: \"300px\", overflowY: \"auto\" }}>\n        {chats.map((chat, index) => (\n          <div key={index} style={{ textAlign: chat.sender === \"You\" ? \"right\" : \"left\", margin: \"5px 0\" }}>\n            <strong>{chat.sender}: </strong>\n            {chat.text}\n            {chat.audio && <audio controls src={chat.audio} style={{ display: \"block\", marginTop: \"5px\" }} />}\n          </div>\n        ))}\n      </div>\n      <input\n        type=\"text\"\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        style={{ width: \"80%\", padding: \"5px\", marginTop: \"10px\" }}\n      />\n      <button onClick={sendMessage} style={{ padding: \"5px 10px\", marginLeft: \"10px\" }}>Send</button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}